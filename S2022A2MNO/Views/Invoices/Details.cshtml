@model S2022A2MNO.Models.InvoiceWithDetailViewModel

@{
    ViewBag.Title = "Details";
    var formDate = Model.InvoiceDate.ToShortDateString();
}

<h2>Invoice Details #@Html.DisplayFor(model => model.InvoiceId) </h2>

<div>
    <h4>Invoice and Customer Information</h4>
    <hr />
    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.InvoiceDate)
        </dt>
        <dd>
            @formDate
        </dd>
        <dt>
            @Html.DisplayNameFor(model => model.Total)
        </dt>
        <dd>
            $ @Html.DisplayFor(model => model.Total)
        </dd>
        <dt>
            <b>Sales Representative</b>
        </dt>
        <dd>
            @Model.CustomerEmployeeFirstName @Model.CustomerEmployeeLastName
        </dd>
    </dl>
    <hr />
    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.CustomerId)
        </dt>
        <dd>
            @Html.DisplayFor(model => model.CustomerId)
        </dd>
        <dt>
            Customer Info
        </dt>
        <dd>
            @Model.CustomerFirstName @Model.CustomerLastName<br />
            @Model.CustomerCity, @Model.CustomerState
        </dd>
        <dt>
            Billing Address
        </dt>
        <dd>
            @Model.BillingAddress<br />
            @Model.BillingCity, @Model.BillingState, @Model.BillingCountry<br />
            @Model.BillingPostalCode
        </dd> 
    </dl>
    <table class="table table-striped">
        <caption>Line Item Detail</caption>
        <tr>
            <th>
                Invoice line ID
            </th>
            <th>
                Track ID
            </th>
            <th>
                Track Info
            </th>
            <th>
                Unit price
            </th>
            <th>
                Quantity
            </th>
            <th>
                Item Total
            </th>
            @foreach(var item in Model.InvoiceLines) { 
                <tr>
                    <td>
                        @Html.DisplayFor(i => item.InvoiceLineId)
                    </td>
                    <td>
                        @Html.DisplayFor(i => item.TrackId)
                    </td>
                    <td>
                        @item.TrackName<br />
                        Composer(s): @item.TrackComposer
                    </td>
                    <td>
                        @Html.DisplayFor(i => item.UnitPrice)
                    </td>
                    <td>
                        @Html.DisplayFor(i => item.Quantity)
                    </td>
                    <td>
                        @(item.UnitPrice*item.Quantity)
                    </td>
                </tr>
            }
        </tr>
    </table>
</div>
<p>
    @Html.ActionLink("Back to List", "Index")
</p>
